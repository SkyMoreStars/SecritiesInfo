<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <script src="./js/jquery-3.3.0.min.js"></script>
    <!-- 引入 ECharts 文件 -->
    <script src="./js/echarts.min.js"></script>
    <script src="./js/dark.js"></script>

    <script src="./js/websocket.js"></script>
</head>
<body style="margin: 0 0 0 0;">
    <!-- 为 ECharts 准备一个具备大小（宽高）的 DOM -->
    <div id="main" style="width: 100%;height:0px;"></div>
    <script type="text/javascript">
        var type=new Array();
        var number=new Array();

        $(function () {
            setInterval(test,1000);
            var height=$(window).height();
            $("#main").css("height",height+"px");

            var myChart=echarts.init(document.getElementById("main"),'dark');
            var option={
                title: {
                    text: '异步数据加载示例'
                },
                tooltip: {},
                legend: {
                    data:['指数']
                },
                xAxis: {
                    data: [],
                    type: 'category'

                },
                yAxis: {},
                series: [{
                    name: '指数',
                    type: 'line',
                    data: []
                }]
            }
            myChart.setOption(option);
            function test() {
                type.push(Math.round(Math.random()*10000));
                number.push(Math.round(Math.random()*10000))
                if(!myChart){
                    return
                }
                var option=myChart.getOption();
                option.series[0].data=number;
                option.xAxis.data=type;
                myChart.setOption(option);
            }
        })


    </script>
</body>
</html>